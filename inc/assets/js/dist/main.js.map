{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./inc/assets/js/src/content.js","webpack:///./inc/assets/js/src/frame.js","webpack:///./inc/assets/js/src/index.js","webpack:///./inc/assets/js/src/search.js"],"names":["wp","media","view","AstraSearch","require","AstraContent","View","extend","tagName","className","initialize","value","options","render","search","controller","model","views","add","module","exports","Frame","AstraAttachmentsBrowser","images","object","_","defaults","filters","date","display","sidebar","AttachmentView","Attachment","Library","createContent","attachmentsHeading","Heading","text","astraImages","title","level","$el","find","wrapAll","parent","html","append","photoUploadComplete","savedImage","attachmentData","frame","content","mode","get","trigger","jQuery","click","$","AstraImages","init","undefined","oldMediaFramePost","MediaFrame","Post","oldMediaFrameSelect","Select","pixabayFrame","browseRouter","routerView","prototype","apply","arguments","set","astraimages","priority","bindHandlers","is_elementor_editor","on","contentRegion","state","thisView","setTimeout","document","is_bb_active","is_bb_editor","FLBuilder","_singlePhotoSelector","event","Backbone","id","searching","attributes","placeholder","search_placeholder","type","events","infinite","doSearch","which","target","removeClass","addClass","$scope","animate","scrollTop","data","AstraImageCommon","infiniteLoad","thisObject","config","q","url","pixabay_url","param","fetch","then","response","json","result","hits","pushState"],"mappings":"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","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","wp.media.view.AstraSearch = require( './search.js' );\n\nvar AstraContent = wp.media.View.extend({\n\n    tagName: 'div',\n    className: 'ast-attachments-search-wrap',\n    initialize: function() {\n        this.value = this.options.value;\n    },\n\n    render: function() {\n\n        var search = new wp.media.view.AstraSearch({\n            controller: this.controller,\n            model: this.model,\n        });\n        this.views.add( search );\n        return this;\n    }\n});\n\nmodule.exports = AstraContent;","var Frame = wp.media.view.Frame,\n    AstraAttachmentsBrowser;\n\nwp.media.view.AstraContent = require( './content.js' );\n\nAstraAttachmentsBrowser = Frame.extend({\n    tagName:   'div',\n    className: 'attachments-browser ast-attachments-browser',\n    images : [],\n    object: [], \n    initialize: function() {\n        _.defaults( this.options, {\n            filters: false,\n            search:  true,\n            date:    true,\n            display: false,\n            sidebar: true,\n            AttachmentView: wp.media.view.Attachment.Library\n        });\n\n        // Add a heading before the attachments list.\n        this.createContent();\n    },\n\n    createContent: function() {\n\n        this.attachmentsHeading = new wp.media.view.Heading( {\n            text: astraImages.title,\n            level: 'h3',\n            className: 'ast-media-views-heading'\n        } );\n        // this.views.add( this.attachmentsHeading );\n        this.views.add( new wp.media.view.AstraContent );\n        this.$el.find( '.ast-image__search' ).wrapAll( '<div class=\"ast-image__search-wrap\">' ).parent().html();\n        this.$el.find( '.ast-image__search-wrap' ).append( '<span class=\"ast-icon-search search-icon\"></span>' );\n    },\n\n    photoUploadComplete: function( savedImage ) {\n        if ( savedImage && savedImage.attachmentData) {\n            this.model.frame.content.mode(\"browse\")\n            this.model.get(\"selection\").add( savedImage.attachmentData )\n            this.model.frame.trigger(\"library:selection:add\")\n            this.model.get(\"selection\")\n            jQuery(\".media-frame .media-button-select\").click()\n        }\n    }\n});\n\nmodule.exports = AstraAttachmentsBrowser;","(function($){\n\n    var AstraImages = {\n\n        init: function() {\n\n            if ( undefined != wp && wp.media ) {\n\n                var $ = jQuery,\n                    oldMediaFramePost = wp.media.view.MediaFrame.Post,\n                    oldMediaFrameSelect = wp.media.view.MediaFrame.Select;\n\n                wp.media.view.AstraAttachmentsBrowser = require( './frame.js' );\n\n                const pixabayFrame = {\n\n                    // Tab / Router\n                    browseRouter( routerView ) {\n                        oldMediaFrameSelect.prototype.browseRouter.apply( this, arguments );\n                        routerView.set( {\n                            astraimages: {\n                                text: astraImages.title,\n                                priority: 70,\n                            },\n                        } );\n                    },\n                \n                    // Handlers\n                    bindHandlers() {\n                        if ( astraImages.is_elementor_editor ) {\n                            oldMediaFramePost.prototype.bindHandlers.apply( this, arguments );\n                        } else {\n                            oldMediaFrameSelect.prototype.bindHandlers.apply( this, arguments );\n                        }\n                        this.on( 'content:create:astraimages', this.astraimages, this );\n                    },\n                \n                    /**\n                     * Render callback for the content region in the `browse` mode.\n                     *\n                     * @param {wp.media.controller.Region} contentRegion\n                     */\n                    astraimages( contentRegion ) {\n                        const state = this.state();\n                        // Browse our library of attachments.\n                        let thisView = new wp.media.view.AstraAttachmentsBrowser({\n                            controller: this,\n                            model:      state,\n                            AttachmentView: state.get( 'AttachmentView' )\n                        });\n                        contentRegion.view = thisView\n                        wp.media.view.AstraAttachmentsBrowser.object = thisView\n                        setTimeout( function() {\n                            $( document ).trigger( 'ast-image__set-scope' );\n                        }, 100 );\n                    }\n                    \n                }\n\n                if ( astraImages.is_elementor_editor ) {\n                    wp.media.view.MediaFrame.Post = oldMediaFramePost.extend( pixabayFrame );\n                } else {\n                    wp.media.view.MediaFrame.Select = oldMediaFrameSelect.extend( pixabayFrame );\n                }\n            }\n        },\n\n    };\n\n    /**\n     * Initialize AstraImages\n     */\n    $( function(){\n\n        AstraImages.init();\n\n        if ( astraImages.is_bb_active && astraImages.is_bb_editor ) {\n            if ( undefined !== FLBuilder ) {\n                if ( null !== FLBuilder._singlePhotoSelector ) {\n                    FLBuilder._singlePhotoSelector.on( 'open', function( event ) {\n                        AstraImages.init();\n                    } );\n                }\n            }\n        }\n\n    });\n\n})(jQuery);\n\n","$ = jQuery\n// Search input view controller.\nvar AstraSearch = wp.Backbone.View.extend({\n\n    tagName: 'input',\n    className: 'ast-image__search',\n    id: 'ast-image-search-input',\n    searching: false,\n    images: [],\n    attributes: {\n        placeholder: astraImages.search_placeholder,\n        type: 'search',\n        'aria-describedby': 'live-search-desc'\n    },\n\n    events: {\n        'search' : 'search',\n        'keyup': 'search',\n        'blur': 'pushState',\n        'infinite': 'infinite',\n    },\n\n    initialize: function( options ) {\n\n        this.parent = options.parent;\n    },\n\n    infinite: function( event ) {\n\n        // Since doSearch is debounced, it will only run when user input comes to a rest.\n        this.doSearch( event );\n    },\n\n    search: function( event ) {\n\n        // Clear on escape.\n        if ( event.type === 'keyup' && event.which === 27 ) {\n            event.target.value = '';\n        }\n        if( '' == event.target.value ) {\n            this.$el.removeClass('has-input');\n        } else {\n            this.$el.addClass('has-input');\n        }\n\n        $scope.find( '.ast-image__skeleton' ).animate({ scrollTop: 0 }, 0 );\n        $( 'body' ).data( 'page', 1 );\n        AstraImageCommon.infiniteLoad = false;\n\n        let thisObject = this;\n        setTimeout( function(){\n            thisObject.doSearch( event );\n        }, 1500 );\n    },\n\n    // Runs a search on the theme collection.\n    doSearch: function( event ) {\n\n        if ( this.searching ) {\n            return;\n        }\n\n        let thisObject = this;\n        thisObject.searching = true;\n        AstraImageCommon.config.q = event.target.value;\n        var url = astraImages.pixabay_url + '?' + $.param( AstraImageCommon.config );\n\n        if ( url ) {\n            fetch( url ).then(function (response) {\n                return response.json();\n            }).then(function (result) {\n                thisObject.searching = false;\n                this.images = result.hits;\n                wp.media.view.AstraAttachmentsBrowser.images = this.images;\n                $( document ).trigger( 'ast-image__refresh' );\n            });\n        }\n    },\n\n    pushState: function( event ) {\n        $( document ).trigger( 'ast-image__refresh' );\n    }\n});\n\nmodule.exports = AstraSearch;"],"sourceRoot":""}